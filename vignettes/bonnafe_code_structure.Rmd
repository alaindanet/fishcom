---
title: "Review of Bonnafe code"
author: "Alain Danet"
date: "`r Sys.Date()`"
bibliography: references.bib
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Review of Bonnafe code}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

The objective of this vignette is to understand the code written by
@bonnafe_trophic_nodate.

## Overall structure

```{bash}
cd ../bonnafe_work
tree -d -L 2
```

### Analysis

Contains analysis of the effect of temperature on the topology of the trophic
network on `TL`, `S`, `L.S.2`, `TLmax`, `Omni` and `BT_cor`.

- What:
  - Descriptive analysis
    - Correlation between variables
  - Statistical analysis
    - Mixed models
    - Model diagnostics
    - Plots

- Scripts:
  1. `../bonnafe_work/analysis/Temp_TNT/temperature_initiate.r` master script 
  2. To be continued...
     

- Data: `../bonnafe_work/data/meta_data/`
  - data for different trophic networks

## Data

### bib_dataÂ 

- Build cumulated trophic network ?
  - Script: `../bonnafe_work/data/bib_data/AccMat_v0.r`
    - Could be easily factorize (I guess) 
  - data:
    - Fish-Fish: parameters of the predation windows `../bonnafe_work/data/bib_data/F-F.csv`
      - Visualisation: `../bonnafe_work/data/bib_data/F-F.pdf`
      - Variables:
	- `species code`
	- `par_1_min`, max and mean: probably $\alpha= 0.03$
	- `par_2_min`, max and mean: probably $\beta$
    - Ontogenic Diet shift: 
      - Fish: `../bonnafe_work/data/bib_data/ODSF.csv`
      - Variables: 
	- `stage`: ontogenic stage
	- `size` min and max: size range for a given life stage 
	- `light`
	- All the resources: from R1 to R7  
	- `fish`: piscivory
      - Resources: `../bonnafe_work/data/bib_data/ODSR.csv`
	- Variables: same as Fish diet data
    - `../bonnafe_work/data/raw_data/data_clean.txt`
      - **THE FILE**, really big
      - Variables: 
	- `OPCOD`
	- `Station`
	- `Species`
	- `Length`
	- `Linf`
	- `Pisc`
	- `Month`
	- `Year`
	- `Method`
	- `Strategy`
	- `Nbpass`
	- `Width`
	- `Surf`
	- `moTempMF1`
	- `TempMF2`
	- `SumMF1`
	- `SumMF2`
	- `Bassin`
	- `Alt`
	- `Slope`
	- `Distsource`
	- `SurfBV`
	- `Count`
	- `Nb.species`
	- `Weight`
    - `../bonnafe_work/data/bib_data/size_quantiles.csv`
  - What ? I think that the goal is to determine the predation window for each class of each species
  - Two types of methods:
    1. With ontogenic stage: 1 class by ontogenic stage
    2. With size class (quantile methods): 1 class by nth quantile (depends on
       the number of class defined)
       - 15 ways to do it:
	 - midpoint or range (with overlap or no overlap)?  
	 -predation window: constant or not (= same $\beta$ because $\alpha$ is
	 always constant)
	 - different numbers of size classes
	 - To be continued...


# References
